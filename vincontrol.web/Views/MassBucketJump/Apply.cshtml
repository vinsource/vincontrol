@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Apply Mass Bucket Jump</title>
    <link href="@Url.Content("~/Content/inventory.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/js/fancybox/jquery.fancybox-1.3.4.css")" rel="stylesheet" type="text/css" />
    <style type="text/css">
        body
        {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
            overflow: auto;
            padding-top: 10px;
            padding-bottom: 30px;
            /*width: 700px;*/
            padding-left: 60px;
            margin: 0 auto;
            margin-top: 20px;
            background: #003399;
        }

        input[type="button"], input[type="sumbit"]
        {
            background: #3366cc !important;
            border: 0;
            color: White;
            padding: 3px 6px;
        }

            input[type="button"]:hover, input[type="sumbit"]:hover
            {
                background: #3366cc !important;
            }
    </style>
    <style type="text/css">
        .bj_notes_holder
        {
            width: 95%;
            margin: 5px auto;
        }

        .bj_notes_title
        {
            font-weight: bold;
            color: #444;
            font-size: 15px;
        }

        .bj_notes_value
        {
            height: 120px;
            border: 1px solid #000;
        }

        .bj_signature_holder
        {
            width: 95%;
            height: 50px;
            margin: 30px auto;
        }

        .bj_signature_left
        {
            width: 40%;
            float: left;
        }

        .bj_signature_right
        {
            width: 40%;
            float: right;
        }

        .bj_signature_borderbottom
        {
            font-weight: bold;
            color: #444;
            font-size: 15px;
            border-bottom: 2px solid #555;
            padding: 3px;
            height: 20px;
        }

        .bj_signature_date
        {
            font-weight: bold;
            color: #444;
            font-size: 15px;
        }

        .bj_signature_date
        {
            font-weight: bold;
            color: #444;
            font-size: 15px;
        }

        .bj_cpricing
        {
            margin-top: 10px;
            font-weight: bold;
            font-size: 35px;
            text-align: center;
        }

        .bj_option_adjustment_holder
        {
            width: 50%;
            margin: 0px auto;
            height: 700px;
        }

        .bj_oa_title
        {
            /*padding-left: 42px;*/
            font-weight: bold;
            float: left;
            width: 47%;
            text-align: right;
        }

        .bj_oa_items_list
        {
        }

        .bj_oa_items
        {
            clear: both;
            height: 22px;
        }

        .bj_oa_items_text
        {
            float: left;
            font-weight: bold;
            width: 47%;
            text-align: right;
            color: #444;
            font-size: 14px;
        }

        .bj_oa_items_value
        {
            /*float: right;
	    width: 40%;*/
            float: left;
            font-weight: bold;
            width: 47%;
            text-align: right;
            background-color: #CDCDCD;
            border: 1px solid #000;
            font-size: 15px;
            font-weight: bold;
            color: #333;
        }

        .bj_adjustment_holder
        {
            clear: both;
            width: 80%;
            margin: 0px auto;
        }

        .bj_adjustment_items
        {
            clear: both;
            height: 40px;
            margin-top: 7px;
        }

        .bj_adjustment_title
        {
            text-align: center;
            float: left;
            margin-left: 5px;
            width: 240px;
            font-weight: bold;
            font-size: 14px;
        }

        .bj_adjustment_input_white
        {
            padding: 3px;
            width: 120px;
            border: 1px solid #333;
            background-color: white;
            font-weight: bold;
            font-size: 14px;
            text-align: center;
            float: left;
            margin-left: 5px;
        }

        .bj_adjustment_input_gray
        {
            padding: 3px;
            width: 120px;
            border: 1px solid #333;
            background-color: #CDCDCD;
            font-weight: bold;
            font-size: 14px;
            text-align: center;
            float: left;
            margin-left: 5px;
        }

        .bj_vh_holder
        {
        }

            .bj_vh_holder > div
            {
                margin-top: 5px;
                box-sizing: border-box;
                -moz-box-sizing: border-box; /* Firefox */
                width: 43%;
            }

        .bj_vh_left
        {
            float: left;
        }

        .bj_vh_right
        {
            float: right;
        }

        .bj_vh_title
        {
            font-size: 14px;
            font-weight: bold;
        }

        .bj_vh_info
        {
            height: 130px;
        }

        .bj_vh_info_img
        {
            width: 40%;
            float: left;
            padding: 3px 0px;
            border: 1px solid #000;
        }

            .bj_vh_info_img img
            {
                width: 100%;
            }

        .bj_vh_info_pm
        {
            width: 58%;
            float: right;
        }

        .bj_vh_info_price
        {
            text-align: center;
        }

        .bj_vh_info_title
        {
            font-size: 14px;
            font-weight: bold;
            color: #555;
        }

        .bj_vh_info_value
        {
            border: 2px solid #777;
            font-size: 20px;
            color: #FFF;
            background-color: #039;
            font-weight: bold;
        }

        .bj_vh_info_mileage
        {
            text-align: center;
        }

            .bj_vh_info_mileage .bj_vh_info_value
            {
                font-size: 15px !important;
                padding: 3px;
            }

        .bucketjump_container
        {
            margin: 0px auto;
            width: auto;
            background-color: white;
            display: inline-block;
            /* border: 1px solid black; */
            padding: 2px;
        }

        .bucketjump_vinlogo img
        {
            margin: 10px auto;
            display: block;
        }

        .bucketjump_age_holder
        {
            width: 42%;
            height: 30px;
            margin: 0px auto;
        }

        .bucketjump_age_items
        {
            float: left;
            border: 1px solid #333;
            font-size: 14px;
            width: 23px;
            text-align: center;
            padding: 5px;
            font-weight: bold;
        }

        .bucketjump_age_title, .bucketjump_age_chosen
        {
            background-color: #CDCDCD;
        }

        .bucketjump_dealer_compare_holder
        {
            clear: both;
            border: 2px solid #333;
            height: 28px;
            margin-top: 15px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

            .bucketjump_dealer_compare_holder > div
            {
                box-sizing: border-box;
                -moz-box-sizing: border-box; /* Firefox */
                float: left;
                text-align: center;
                padding: 5px;
                font-size: 15px;
                font-weight: bold;
            }

        .bj_dc_left
        {
            width: 43%;
        }

        .bj_dc_middle
        {
            background-color: #039;
            color: white;
            width: 14%;
            border-left: 2px solid #777;
            border-right: 2px solid #777;
        }

        .bj_dc_right
        {
            width: 43%;
        }

        #vehicle-list table
        {
            width: 980px;
            font-size: 1.0em;
        }

        #vehicle-list td
        {
            padding: .3em .7em .3em .7em;
            border-bottom: 1px #bbbbbb solid;
        }

        #vehicle-list tr:nth-child(2n+2) td
        {
            background: #cccccc;
        }

        #vehicle-list tr.highlight td
        {
            background: green;
            color: #fff;
        }
        /*#vehicle-list tr:nth-child(1) td {font-weight: bold;color: white;background: #222222;}*/
        .isTargetCar
        {
            background-color: Green;
        }

        #graph-title-bar
        {
            position: relative;
            height: 50px !important;
            max-height: 50px !important;
            overflow: hidden;
            width: 99%;
            display: block;
        }

            #graph-title-bar h2
            {
                display: inline-block;
                padding-bottom: 0;
                margin-bottom: 0;
            }

            #graph-title-bar a
            {
                margin-left: 20px;
                padding: .2em .5em .2em .5em;
                background: #c80000;
                color: white;
                position: relative;
                top: -3px;
                font-size: .9em;
                cursor: pointer;
            }

                #graph-title-bar a:hover
                {
                    background: #880000;
                }

        #printable-list
        {
            display: block;
        }

        .contain_list
        {
            background-color: #E8EAEF;
            display: table;
            width: 100%;
        }

        .list_odd
        {
            background-color: white;
        }

        .white
        {
            border: 2px solid white;
            /*width: 150px!important;*/
        }
    </style>
</head>
<body>
    <div id="content">
        
    </div>
    
    <script src="@Url.Content("~/js/jquery-1.6.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/jquery.cookie.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/jquery.blockUI.js")" type="text/javascript"></script>    
    <script src="@Url.Content("~/js/fancybox/jquery.fancybox-1.3.4.pack.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/Utility.js")" type="text/javascript"></script>
    <script type="text/javascript">
        var skip = true;
        var count = 1;
        $(document).ready(function () {
            blockUIPopUp();
            $.ajax({
                type: "POST",
                url: "/Market/KarPowerResultForMassBucketJump",
                data: {
                    listingId: '@ViewData["InventoryId"]',
                    dealer: '@ViewData["MarketDealer"]',
                    price: '@ViewData["MarketPrice"]',
                    year: '@ViewData["MarketYear"]',
                    make: '@ViewData["MarketMake"]',
                    model: '@ViewData["MarketModel"]',
                    color: '@ViewData["MarketColor"]',
                    miles: '@ViewData["MarketOdometer"]',
                    plusPrice: '@ViewData["MarketPlusPrice"]',
                    certified: true,
                    independentAdd: '',
                    certifiedAdd: '',
                    wholesaleWithoutOptions: '@ViewData["WholesaleWithoutOptions"]',
                    wholesaleWithOptions: '@ViewData["WholesaleWithOptions"]',
                    options: '@ViewData["MarketOption"]',
                    chartCarType: 0,
                    trims: '',
                    isAll: true,
                    isFranchise: false,
                    isIndependant: false,
                    inventoryType: 2,
                    ranges: 100,
                    selectedVin: '@ViewData["MarketVIN"]',
                    image: '@ViewData["MarketDealerImage"]',

                },
                dataType: 'html',
                success: function(data) {
                    $('#content').html(data);
                    unblockUI();
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    unblockUI();
                }
            });

            $('#btnSkip').live('click', function () {
                skip = true;
                Printing();
            });

            $('#btnApplyAll').live('click', function () {
                skip = false;
                Printing();
            });

            $('#btnClose').live('click', function() {
                parent.$.fancybox.close();
            });

            $('#IsMassBucketJumpAll').live('click', function () {
                if ($(this).is(":checked")) {
                    //$("inpuyt:checkbox[id^=IsMassBucketJump_]").prop({ checked: true });
                    $("input:checkbox[name^=IsMassBucketJump_]").each(function () {
                        $(this).prop("checked", true);
                    });
                } else {
                    //$("inpuyt:checkbox[id^=IsMassBucketJump_]").prop("checked", false);
                    $("input:checkbox[name^=IsMassBucketJump_]").each(function () {
                        $(this).prop("checked", false);
                    });
                }
            });
        });

        function Printing() {
            count = 1;
            var selectedListingIds = '';
            $("input:checkbox[name^=IsMassBucketJump_]:checked").each(function () {
                selectedListingIds += $(this).val() + ",";
                count++;
            });

            if (selectedListingIds == '') {
                ShowInfoMessage("You must choose at leas one car to apply");
            } else {
                blockUIPopUp();
                var flag = true;
                var temp = window.setInterval(function () {
                    if (flag) {
                        unblockUI();
                        //ShowInfoMessage("Bucket jump applied to all selected vehicles successfully.");
                        flag = false;
                    }
                }, 10000 * count);
                var url = "/PDF/PrintBucketJumpWithKarPowerOptions?listingId=" + (selectedListingIds);
                url += "&dealer=" + '@ViewData["MarketDealer"]';
                url += "&price=" + '@ViewData["MarketPrice"]';
                url += "&year=" + '@ViewData["MarketYear"]';
                url += "&make=" + '@ViewData["MarketMake"]';
                url += "&model=" + '@ViewData["MarketModel"]';
                url += "&color=" + '@ViewData["MarketColor"]';
                url += "&miles=" + '@ViewData["MarketOdometer"]';
                url += "&plusPrice=" + '@ViewData["MarketPlusPrice"]';
                url += "&certified=" + true;
                url += "&independentAdd=" + '';
                url += "&certifiedAdd=" + '';
                url += "&wholesaleWithoutOptions=" + '@ViewData["WholesaleWithoutOptions"]';
                url += "&wholesaleWithOptions=" + '@ViewData["WholesaleWithOptions"]';
                url += "&options=" + '@ViewData["MarketOption"]';
                url += "&chartCarType=" + 0;
                url += "&Trims=" + '';
                url += "&isAll=" + true;
                url += "&isFranchise=" + false;
                url += "&isIndependant=" + false;
                url += "&inventoryType=" + 2;
                url += "&ranges=" + 100;
                url += "&selectedVin=" + '@ViewData["MarketVIN"]';
                url += "&image=" + '@ViewData["MarketDealerImage"]';
                url += "&marketId=" + 0;
                url += "&marketType=" + '';
                
                window.location.href = url;
            }
            
        }
    </script>
</body>
</html>
